{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}–î–∞—à–±–æ—Ä–¥ | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—ã</a></h1>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">–ì–ª–∞–≤–Ω–∞—è</a>
&rsaquo; –î–∞—à–±–æ—Ä–¥
</div>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h1>–î–∞—à–±–æ—Ä–¥ —Å–∏—Å—Ç–µ–º—ã</h1>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ -->
    <div class="stats-grid">
        <div class="stat-card users-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
                <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <div class="stat-numbers">
                    <span class="main-number">{{ user_stats.total_users }}</span>
                    <span class="sub-number">–ê–∫—Ç–∏–≤–Ω—ã—Ö: {{ user_stats.active_users }}</span>
                </div>
                <div class="stat-details">
                    <span>–°—Ç—É–¥–µ–Ω—Ç–æ–≤: {{ user_stats.students }}</span>
                    <span>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π: {{ user_stats.teachers }}</span>
                    <span>–†–æ–¥–∏—Ç–µ–ª–µ–π: {{ user_stats.parents }}</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card courses-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-content">
                <h3>–ö—É—Ä—Å—ã</h3>
                <div class="stat-numbers">
                    <span class="main-number">{{ course_stats.total_courses }}</span>
                    <span class="sub-number">–ê–∫—Ç–∏–≤–Ω—ã—Ö: {{ course_stats.active_courses }}</span>
                </div>
                <div class="stat-details">
                    <span>–ì—Ä—É–ø–ø: {{ course_stats.total_groups }}</span>
                    <span>–ê–∫—Ç–∏–≤–Ω—ã—Ö: {{ course_stats.active_groups }}</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card payments-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-content">
                <h3>–ü–ª–∞—Ç–µ–∂–∏</h3>
                <div class="stat-numbers">
                    <span class="main-number">{{ payment_stats.total_payments }}</span>
                    <span class="sub-number">–û–ø–ª–∞—á–µ–Ω–æ: {{ payment_stats.paid_payments }}</span>
                </div>
                <div class="stat-details">
                    <span>–î–æ—Ö–æ–¥: {{ payment_stats.total_revenue }} —Ä—É–±.</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card lessons-card">
            <div class="stat-icon">üìÖ</div>
            <div class="stat-content">
                <h3>–ó–∞–Ω—è—Ç–∏—è</h3>
                <div class="stat-numbers">
                    <span class="main-number">{{ lesson_stats.total_lessons }}</span>
                    <span class="sub-number">–ó–∞–≤–µ—Ä—à–µ–Ω–æ: {{ lesson_stats.completed_lessons }}</span>
                </div>
                <div class="stat-details">
                    <span>–°–µ–≥–æ–¥–Ω—è: {{ lesson_stats.today_lessons }}</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="quick-actions">
        <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="actions-grid">
            <a href="{% url 'admin:accounts_user_add' %}" class="action-card">
                <div class="action-icon">üë§</div>
                <div class="action-text">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
            </a>
            <a href="{% url 'admin:courses_course_add' %}" class="action-card">
                <div class="action-icon">üìò</div>
                <div class="action-text">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</div>
            </a>
            <a href="{% url 'admin:courses_group_add' %}" class="action-card">
                <div class="action-icon">üë•</div>
                <div class="action-text">–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É</div>
            </a>
            <a href="{% url 'admin:courses_lesson_add' %}" class="action-card">
                <div class="action-icon">üìù</div>
                <div class="action-text">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</div>
            </a>
            <a href="{% url 'admin:admin_panel_mass_email' %}" class="action-card">
                <div class="action-icon">üìß</div>
                <div class="action-text">–ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞</div>
            </a>
            <a href="{% url 'admin:admin_panel_reports' %}" class="action-card">
                <div class="action-icon">üìä</div>
                <div class="action-text">–û—Ç—á–µ—Ç—ã</div>
            </a>
        </div>
    </div>
    
    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="recent-activity">
        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="activity-list">
            <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="activity-item">
                <div class="activity-time">5 –º–∏–Ω –Ω–∞–∑–∞–¥</div>
                <div class="activity-description">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ivanov –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏–≤–∞–Ω</div>
            </div>
            <div class="activity-item">
                <div class="activity-time">10 –º–∏–Ω –Ω–∞–∑–∞–¥</div>
                <div class="activity-description">–û–ø–ª–∞—Ç–∞ –∫—É—Ä—Å–∞ "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö"</div>
            </div>
            <div class="activity-item">
                <div class="activity-time">15 –º–∏–Ω –Ω–∞–∑–∞–¥</div>
                <div class="activity-description">–°–æ–∑–¥–∞–Ω–∞ –≥—Ä—É–ø–ø–∞ "–ì—Ä—É–ø–ø–∞ A1-01"</div>
            </div>
        </div>
    </div>
</div>

<style>
.dashboard-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 20px;
    display: flex;
    align-items: center;
    transition: transform 0.2s ease;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.stat-icon {
    font-size: 2.5em;
    margin-right: 15px;
}

.stat-content h3 {
    margin: 0 0 10px 0;
    color: #333;
    font-size: 1.2em;
}

.stat-numbers {
    margin-bottom: 10px;
}

.main-number {
    font-size: 2em;
    font-weight: bold;
    color: #007bff;
}

.sub-number {
    font-size: 0.9em;
    color: #666;
}

.stat-details {
    font-size: 0.85em;
    color: #888;
}

.stat-details span {
    display: block;
    margin: 2px 0;
}

.quick-actions h2 {
    margin: 30px 0 20px 0;
    color: #333;
}

.actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;
}

.action-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    text-decoration: none;
    color: #333;
    transition: all 0.2s ease;
    border: 2px solid #e9ecef;
}

.action-card:hover {
    background: #007bff;
    color: white;
    border-color: #007bff;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,123,255,0.3);
}

.action-icon {
    font-size: 2em;
    margin-bottom: 10px;
}

.action-text {
    font-weight: 500;
}

.recent-activity h2 {
    margin: 30px 0 20px 0;
    color: #333;
}

.activity-list {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 20px;
}

.activity-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
    border-bottom: 1px solid #eee;
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-time {
    color: #888;
    font-size: 0.9em;
}

.activity-description {
    flex: 1;
    margin-left: 20px;
    font-weight: 500;
}

.users-card { border-top: 4px solid #007bff; }
.courses-card { border-top: 4px solid #28a745; }
.payments-card { border-top: 4px solid #ffc107; }
.lessons-card { border-top: 4px solid #dc3545; }

@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .actions-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .activity-item {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .activity-time {
        margin-bottom: 5px;
    }
    
    .activity-description {
        margin-left: 0;
    }
}
</style>
{% endblock %}